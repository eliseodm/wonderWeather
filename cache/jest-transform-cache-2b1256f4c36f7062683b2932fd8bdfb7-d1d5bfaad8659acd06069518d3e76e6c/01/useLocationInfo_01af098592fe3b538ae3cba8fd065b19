db88d24d52091c6889ee4fa73e6f2cfe
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _react = require("react");

var _axios = require("../axios");

var useLocationInfo = function useLocationInfo(publicIp) {
  var _useState = (0, _react.useState)(true),
      _useState2 = (0, _slicedToArray2.default)(_useState, 2),
      loading = _useState2[0],
      setLoading = _useState2[1];

  var _useState3 = (0, _react.useState)(null),
      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
      locationData = _useState4[0],
      setLocationData = _useState4[1];

  var fetchIpInfo = function () {
    var _ref = (0, _asyncToGenerator2.default)(function* () {
      yield _axios.instanceIpAPI.get("/" + publicIp).then(function (response) {
        var data = response.data;
        setLocationData({
          city: data.city,
          country: data.country,
          lat: data.lat,
          lon: data.lon
        });
        setLoading(false);
      }).catch(function (error) {
        console.log("ERROR: ", error);
      });
    });

    return function fetchIpInfo() {
      return _ref.apply(this, arguments);
    };
  }();

  (0, _react.useEffect)(function () {
    fetchIpInfo();
  }, [publicIp]);
  return {
    loading: loading,
    locationData: locationData
  };
};

var _default = useLocationInfo;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VMb2NhdGlvbkluZm8iLCJwdWJsaWNJcCIsInVzZVN0YXRlIiwibG9hZGluZyIsInNldExvYWRpbmciLCJsb2NhdGlvbkRhdGEiLCJzZXRMb2NhdGlvbkRhdGEiLCJmZXRjaElwSW5mbyIsImluc3RhbmNlSXBBUEkiLCJnZXQiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwiY2l0eSIsImNvdW50cnkiLCJsYXQiLCJsb24iLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInVzZUVmZmVjdCJdLCJzb3VyY2VzIjpbInVzZUxvY2F0aW9uSW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBpbnN0YW5jZUlwQVBJIH0gZnJvbSBcIi4uL2F4aW9zXCI7XG5cbmNvbnN0IHVzZUxvY2F0aW9uSW5mbyA9IChwdWJsaWNJcCkgPT4ge1xuXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9jYXRpb25EYXRhLCBzZXRMb2NhdGlvbkRhdGFdID0gdXNlU3RhdGUobnVsbCk7XG4gIFxuICBjb25zdCBmZXRjaElwSW5mbyA9IGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBpbnN0YW5jZUlwQVBJXG4gICAgICAuZ2V0KGAvJHtwdWJsaWNJcH1gKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzcG9uc2U7XG4gICAgICAgIHNldExvY2F0aW9uRGF0YSh7XG4gICAgICAgICAgY2l0eTogZGF0YS5jaXR5LFxuICAgICAgICAgIGNvdW50cnk6IGRhdGEuY291bnRyeSxcbiAgICAgICAgICBsYXQ6IGRhdGEubGF0LFxuICAgICAgICAgIGxvbjogZGF0YS5sb24sXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1I6IFwiLCBlcnJvcik7XG4gICAgICB9KTtcbiAgfTtcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2hJcEluZm8oKTtcbiAgfSwgW3B1YmxpY0lwXSk7XG4gIHJldHVybiB7IGxvYWRpbmcsIGxvY2F0aW9uRGF0YSB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlTG9jYXRpb25JbmZvOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQSxJQUFNQSxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLENBQUNDLFFBQUQsRUFBYztFQUVwQyxnQkFBOEIsSUFBQUMsZUFBQSxFQUFTLElBQVQsQ0FBOUI7RUFBQTtFQUFBLElBQU9DLE9BQVA7RUFBQSxJQUFnQkMsVUFBaEI7O0VBQ0EsaUJBQXdDLElBQUFGLGVBQUEsRUFBUyxJQUFULENBQXhDO0VBQUE7RUFBQSxJQUFPRyxZQUFQO0VBQUEsSUFBcUJDLGVBQXJCOztFQUVBLElBQU1DLFdBQVc7SUFBQSwyQ0FBRyxhQUFZO01BQzlCLE1BQU1DLG9CQUFBLENBQ0hDLEdBREcsT0FDS1IsUUFETCxFQUVIUyxJQUZHLENBRUUsVUFBQ0MsUUFBRCxFQUFjO1FBQ2xCLElBQVFDLElBQVIsR0FBaUJELFFBQWpCLENBQVFDLElBQVI7UUFDQU4sZUFBZSxDQUFDO1VBQ2RPLElBQUksRUFBRUQsSUFBSSxDQUFDQyxJQURHO1VBRWRDLE9BQU8sRUFBRUYsSUFBSSxDQUFDRSxPQUZBO1VBR2RDLEdBQUcsRUFBRUgsSUFBSSxDQUFDRyxHQUhJO1VBSWRDLEdBQUcsRUFBRUosSUFBSSxDQUFDSTtRQUpJLENBQUQsQ0FBZjtRQU1BWixVQUFVLENBQUMsS0FBRCxDQUFWO01BQ0QsQ0FYRyxFQVlIYSxLQVpHLENBWUcsVUFBQ0MsS0FBRCxFQUFXO1FBQ2hCQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxTQUFaLEVBQXVCRixLQUF2QjtNQUNELENBZEcsQ0FBTjtJQWVELENBaEJnQjs7SUFBQSxnQkFBWFgsV0FBVztNQUFBO0lBQUE7RUFBQSxHQUFqQjs7RUFrQkEsSUFBQWMsZ0JBQUEsRUFBVSxZQUFNO0lBQ2RkLFdBQVc7RUFDWixDQUZELEVBRUcsQ0FBQ04sUUFBRCxDQUZIO0VBR0EsT0FBTztJQUFFRSxPQUFPLEVBQVBBLE9BQUY7SUFBV0UsWUFBWSxFQUFaQTtFQUFYLENBQVA7QUFDRCxDQTNCRDs7ZUE2QmVMLGUifQ==